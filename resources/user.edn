{ns     user
 import #{stresty stresty.aidbox}

 config
 {:zen/tags #{stresty/config}
  :url      "http://access-policy-box.aidbox.io"
  :agents   {:default {:type          stresty/basic-auth
                       :client-id     "stresty"
                       :client-secret "stresty"}
             :user    {:type          stresty.aidbox/auth-token
                       :username      "patient-user"
                       :password      "admin"
                       :client-id     "myapp"
                       :client-secret "verysecret"}}}

 create-patient
 {:zen/tags #{stresty/case}
  :title    "Create Patient"
  :desc     "This scenario shows you, how to create a new Patient resource in Aidbox"
  :steps    [{:type     stresty.aidbox/truncate-step
              :truncate [:Patient]}
             {:type stresty.aidbox/desc-step
              :description "
***Let's create patient with name John Smith***
1. haha
2. hihi
3. hehe

> some quote

[Awesome link](https://github.com/razum2um/awesome-clojure)

![Example image](https://camo.githubusercontent.com/abb97269de2982c379cbc128bba93ba724d8822bfbe082737772bd4feb59cb54/68747470733a2f2f63646e2e7261776769742e636f6d2f73696e647265736f726875732f617765736f6d652f643733303566333864323966656437386661383536353265336136336531353464643865383832392f6d656469612f62616467652e737667)

```
code code code
```

| table | heading |
| ----- | ------- |
| some  | tortik  |

***


Inline `code`
"}
             {:type  stresty/http-step
              :POST  "/Patient"
              :body  {:id "new-patient" :name [{:family "Smith" :given ["John"]}]}
              :match {:status 221}}
             {:type  stresty/http-step
              :GET   "/Patient/new-patient"
              :match {:status 200
                      :body   {:id "new-patient"}}}
             {:type stresty.aidbox/sql-step
              :sql "SELECT * FROM Patient"}]}

 put-patient
 {:zen/tags #{stresty/case}
  :title    "Put Patient"
  :desc     "Let's learn how to update Patient resource"
  :steps    [{:type  stresty/http-step
              :PUT   "/Patient/pt-1"
              :body  {:name [{:family "Smith" :given ["John"]}]}
              :match {:status 201}}
             {:type  stresty/http-step
              :GET   "/Patient/pt-1"
              :match {:status 200
                      :body   {:name [{:family "Smith" :given ["John"]}]}}}]}

 }

